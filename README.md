ESPAMAI: Embedded System-level Platform synthesis and Application Mapping Tool, extended with tools for Artificial Intelligence
================================================================================================================================
Installation instructions for ESPAM

I. Before installing ESPAM, you might need to install Java SDK and/or Python 2.7. See below:

1. Installing Java SDK: 
- download JAVA JDK (J2SE Development Kit) version 5.0 or later from
http://java.sun.com/javase/downloads/index.jsp
- follow the installation instructions on the web-page

2. Installing python on Linux	
	sudo apt-get update
	sudo apt-get install python2.7

II. Installing ESPAM -- There are several options listed below. Select one of them:

1. OPTION 1: The procedure below describes how to install Espam with 
pre-build Espam related libraries. 

- download ESPAM from the GIT repo as follows ->

git clone git@git.liacs.nl:lerc/espam.git
git checkout espamAI

NOTE: The directory ".../espam/lib/" should contain at least the following 
pre-build libraries:
 
libpandapolylib.so
onnx.jar


- configure and install Espam as follows ->

cd .../espam/
./configure --prefix=`pwd`
            --with-java=[path where Java is installed](If path not specified, the common paths to java/javac will be checked automatically) 
            --with-python=$PYTHONPATH [path to python](If path not specified, the common paths to python will be checked automatically) 
            --with-systemc=[path where SystemC is installed] (if you want to generate and run SystemC simulations)
            --with-darts=[path to DARTS] (if you want use espamAI options)
            --with-output=[path to output directory] (if you want to use specifi directory for output files, generated by espamAI)	
make

NOTE:If ESPAM does not work after installation, 
the reason might be that the pre-build Espam related libraries mentioned above
are very old or incompatible. In such case try to install ESPAM with OPTION 2 below. 

2. OPTION 2: The procedure below describes how to build the libraries used by ESPAM
and how to install ESPAM.

a) First, you need to install the GMP multi-precision library and Polylib library. See below:

a.1) Installing GMP library:
- download the GMP library version 4.3.1 from http://gmplib.org/
- configure and install GMP as follows ->

./configure --prefix=[path where GMP is to be installed]
make
make check
make install

- for more information see the documentation available on the
web-page;

a.2) Installing Polylib library:
- download Polylib version 5.22.4 from
http://icps.u-strasbg.fr/polylib/
- configure and install Polylib as follows ->

./configure --prefix=[path where Polylib is to be installed]
            --enable-longlongint-lib
            --with-libgmp=[path where GMP is installed]
make
make check
make install

NOTE: The "make install" works correctly only if the directory where
you build PolyLib (where you run the "./configure" script) is
different than the directory where you install PolyLib (the directory
in the "--prefix" option). So, do not use --prefix=`pwd`.

b) Install Espam and build the necessary libraries:

b.1) _First_ install the Espam tool

- download ESPAM from the GIT repo as follows ->

git clone csartem@ssh.liacs.nl:espam.git

- configure and install Espam as follows ->

cd .../espam/
./configure --prefix=`pwd`
            --with-java=[path where Java is installed](If path not specified, the common paths to java/javac will be checked automatically) 
            --with-python=$PYTHONPATH [path to python](If path not specified, the common paths to python will be checked automatically) 
            --with-systemc=[path where SystemC is installed] (if you want to generate and run SystemC simulations)
            --with-darts=[path to DARTS] (if you want use espamAI options)
            --with-output=[path to output directory] (if you want to use specifi directory for output files, generated by espamAI)	
make

b.2) Build the Espam related libraries

- configure and build the libraries as follows ->

cd .../espam/src_lib
./configure --prefix=`pwd`
            --with-java=[path where Java is installed]
            --with-espam=[path where Espam is installed]
            --with-gmp=[path where GMP is installed]
            --with-polylib=[path where Polylib is installed]
make

- copy manually the library files from ".../espam/src_lib/lib" to the directory ".../espam/lib"

cp .../espam/src_lib/lib/*.so  .../espam/lib/ 
chmod 755 .../espam/lib/*.so

Now, you need to modify LD_LIBRARY_PATH to point to the polylib and gmp libraries:
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/polylib/library:/path/to/gmp/library

III. You can run ESPAM by running the executable script ".../espam/bin/espam"

